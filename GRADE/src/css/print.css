/**
 * PRINT CSS - Reset completo de layout para exportação PDF
 * 
 * Remove position:absolute, transforms e mostra todos os slides sequencialmente
 * para que o PDF tenha uma página por slide (sem sobreposição)
 */

@media print {
    /* Print-safe: Force background colors */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
    }
    
    @page {
        size: A4 landscape;
        margin: 8mm;
    }
    
    body {
        margin: 0 !important;
        padding: 0 !important;
        overflow: visible !important;
        background: white !important;
        height: auto !important;
        width: 100% !important;
        display: block !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
    
    /* Container principal */
    #viewport {
        position: static !important;
        width: 100% !important;
        height: auto !important;
        aspect-ratio: unset !important;
        transform: none !important;
        overflow: visible !important;
        display: block !important;
        box-shadow: none !important;
        perspective: none !important;
        background: white !important;
    }
    
    /* Cada slide */
    .slide,
    section.slide {
        position: relative !important;
        display: flex !important; /* ← NOVO: flex para centralização */
        flex-direction: column !important; /* ← NOVO: coluna */
        justify-content: center !important; /* ← NOVO: centraliza vertical */
        
        transform: none !important;
        
        /* Altura flexível - SEM limite máximo */
        width: 100% !important;
        height: auto !important;
        min-height: 95vh !important;
        max-height: none !important; /* ← SEM limite */
        
        padding: 15mm !important;
        margin: 0 !important;
        box-sizing: border-box !important;
        
        page-break-after: always !important;
        page-break-inside: avoid !important;
        
        overflow: visible !important; /* ← Mostra tudo */
        opacity: 1 !important;
        visibility: visible !important;
        
        /* Remove absolute positioning */
        inset: unset !important;
        top: auto !important;
        left: auto !important;
        right: auto !important;
        bottom: auto !important;
        
        /* Remove z-index */
        z-index: auto !important;
    }
    
    /* Último slide NÃO força página extra */
    .slide:last-child {
        page-break-after: avoid !important;
    }
    
    /* Garantir que todos os slides sejam visíveis (não apenas .active) */
    .slide.active {
        display: block !important;
    }
    
    /* CRÍTICO: Força TODOS elementos internos */
    .slide *,
    section.slide * {
        position: relative !important; /* ← Tira absolute de TUDO */
        transform: none !important;
        page-break-inside: auto !important; /* ← Permite quebrar se necessário */
        float: none !important;
    }
    
    /* Elementos internos podem quebrar se necessário */
    .slide > * {
        page-break-inside: avoid !important; /* Mas preferir não quebrar */
    }
    
    /* Wrapper interno mantém tamanho original */
    .slide > div,
    section.slide > div {
        width: 100% !important;
        flex-shrink: 0 !important; /* ← Mantém tamanho original */
    }
    
    /* Manter proporções de fonte para impressão */
    .slide h1 {
        font-size: 0.95em !important;
        line-height: 1.2 !important;
        page-break-after: avoid !important;
        page-break-inside: avoid !important;
    }
    
    .slide h2 {
        font-size: 0.95em !important;
        page-break-after: avoid !important;
        page-break-inside: avoid !important;
    }
    
    .slide p {
        font-size: 0.6cm !important;
    }
    
    /* Manter sombras no PDF mas mais leves */
    .card,
    .stat-card,
    .quote-card,
    .risk-card,
    .qr-card,
    .divisor-card,
    .stats-container {
        box-shadow: 0 0.2vw 0.8vw 0 rgba(0, 0, 0, 0.1) !important;
        transform: none !important;
    }
    
    /* Remover hover effects no PDF */
    .card:hover,
    .qr-card:hover,
    .divisor-card:hover {
        box-shadow: 0 0.2vw 0.8vw 0 rgba(0, 0, 0, 0.1) !important;
        transform: none !important;
    }
    
    /* Garantir headers navy aparecem no PDF */
    .cardHeader,
    .cardHeader *,
    [style*="background: var(--navy)"],
    [style*="background:var(--navy)"] {
        background: var(--navy) !important;
        color: var(--white) !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
    
    /* Remover mix-blend-mode e filters no print */
    * {
        mix-blend-mode: normal !important;
        backdrop-filter: none !important;
        filter: none !important;
    }
    
    /* Esconde controles */
    .controls,
    .slide-counter,
    .slide-background {
        display: none !important;
    }
    
    /* Fragmentos visíveis */
    .fragment {
        opacity: 1 !important;
        visibility: visible !important;
    }
}
